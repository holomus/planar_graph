<script biruni>
page.ctrl(function(scope, model) {
  var d = model;

  function changePositionEnable() {
    if (d.position_enable == 'N') {
      d.position_check = 'N';
      d.position_booking = 'N';
      d.position_history = 'N';
      d.position_fixing = 'N';
    }
    else {
      d.rank_enable = 'N';
      d.wage_scale_enable = 'N';
    }
  }

  function changePositionCheck() {
    d.keep_salary = d.position_check;
    d.keep_schedule = d.position_check;
    d.keep_vacation_limit = d.position_check;
    d.keep_rank = d.position_check;
  }

  function save() {
    if (page.valid(scope.form)) {
      page.post(':save', d).then(page.reload, page.alert);
    }
  }

  scope.d = d;
});
</script>
<div class="b-toolbar">
  <button type="button" class="btn btn-primary" ng-click="save()" b-hotkey="save"><t>save</t></button>
</div>
<div class="b-content">
  <form name="form">
    <div class="card card-custom">
      <div class="card-body">
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.position_enable" ng-change="changePositionEnable()"/>
            <span><t>position enable</t></span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.position_check" ng-change="changePositionCheck()" ng-disabled="d.position_enable == 'N'"/>
            <span><t>position check</t></span>
          </label>
        </div>
        <div class="ml-6" ng-if="d.position_check == 'Y'">
          <div class="form-group">
            <label class="checkbox">
              <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.keep_salary"/>
              <span><t>keep salary</t></span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox">
              <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.keep_schedule"/>
              <span><t>keep schedule</t></span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox">
              <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.keep_vacation_limit"/>
              <span><t>keep vacation limit</t></span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox">
              <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.keep_rank"/>
              <span><t>keep rank</t></span>
            </label>
          </div>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.position_booking" ng-disabled="d.position_enable == 'N'"/>
            <span><t>position booking</t></span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.position_history" ng-disabled="d.position_enable == 'N'"/>
            <span><t>position history</t></span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.position_fixing" ng-disabled="d.position_enable == 'N'"/>
            <span><t>position fixing enabled</t></span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.parttime_enable"/>
            <span><t>parttime enable</t></span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.rank_enable" ng-disabled="d.position_enable == 'Y'"/>
            <span><t>rank enable</t></span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.wage_scale_enable" ng-disabled="d.rank_enable == 'N'"/>
            <span><t>wage scale enable</t></span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox">
            <input type="checkbox" ng-true-value="'Y'" ng-false-value="'N'" ng-model="d.notification_enable"/>
            <span><t>notification enable</t></span>
          </label>
        </div>
      </div>
    </div>
  </form>
</div>